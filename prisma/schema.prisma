generator client {  
  provider = "prisma-client-js"  
}  
  
datasource db {  
  provider = "postgresql"  
} 
  
enum DonorCategory {  
  INDIVIDUAL  
  CORPORATE  
  FOUNDATION  
  GOVERNMENT  
  NGO  
}  
  
enum DonationProgram {  
  EDUCATION  
  HEALTHCARE  
  ENVIRONMENT  
  COMMUNITY  
  EMERGENCY  
  RESEARCH  
}  
  
enum DonationStatus {  
  PENDING  
  COMPLETED  
  CANCELLED  
  REFUNDED  
} 
  
model User {  
  id            String    @id @default(cuid())  
  name          String?  
  email         String    @unique  
  emailVerified DateTime?  
  password      String?  
  image         String?  
  role          String    @default("user")  
  createdAt     DateTime  @default(now())  
  updatedAt     DateTime  @updatedAt  
  accounts      Account[]  
  sessions      Session[]  
  donors        Donor[]  
}  
  
model Account {  
  id                String  @id @default(cuid())  
  userId            String  
  type              String  
  provider          String  
  providerAccountId String  
  refresh_token     String?  
  access_token      String?  
  expires_at        Int?  
  token_type        String?  
  scope             String?  
  id_token          String?  
  session_state     String?  
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)  
  @@unique([provider, providerAccountId])  
  @@index([userId])  
} 
  
model Session {  
  id           String   @id @default(cuid())  
  sessionToken String   @unique  
  userId       String  
  expires      DateTime  
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)  
  @@index([userId])  
}  
  
model VerificationToken {  
  identifier String  
  token      String   @unique  
  expires    DateTime  
  @@unique([identifier, token])  
}  
  
model Donor {  
  id              String         @id @default(cuid())  
  name            String  
  email           String         @unique  
  category        DonorCategory  
  avatar          String?  
  message         String?  
  totalDonated    Float          @default(0)  
  joinedDate      DateTime       @default(now())  
  createdAt       DateTime       @default(now())  
  updatedAt       DateTime       @updatedAt  
  userId          String?  
  user            User?          @relation(fields: [userId], references: [id], onDelete: SetNull)  
  donations       Donation[]  
  @@index([email])  
  @@index([category])  
  @@index([userId])  
} 
  
model Donation {  
  id              String         @id @default(cuid())  
  donorId         String  
  amount          Float  
  program         DonationProgram  
  message         String?  
  status          DonationStatus @default(COMPLETED)  
  donationDate    DateTime       @default(now())  
  createdAt       DateTime       @default(now())  
  updatedAt       DateTime       @updatedAt  
  donor           Donor          @relation(fields: [donorId], references: [id], onDelete: Cascade)  
  @@index([donorId])  
  @@index([donationDate])  
  @@index([status])  
}  
  
model AIPolicyEvidence {  
  id              String   @id @default(cuid())  
  policyName      String  
  evidenceText    String   @db.Text  
  sourceUrl       String?  
  submittedBy     String  
  status          String   @default("pending")  
  createdAt       DateTime @default(now())  
  updatedAt       DateTime @updatedAt  
  @@index([policyName])  
  @@index([status])  
} 
